# ===========================================================================
# WadMerge Script for Assets
# ===========================================================================
#
# Argument 0: The build directory.
# Argument 1: The source directory.
# Argument 2: The output WAD.
#

# Turn all carats/circumflexes in filenames into backslashes in entries.
filecharsub ^ \

create out

# Globals
mergedir  out $1/assets/_global nomarkers

# Palettes
mergedir  out $1/assets/palettes nomarkers
mergedir  out $0/convert/palettes nomarkers

# Primary Colormaps
mergedir  out $1/assets/colormaps nomarkers
mergedir  out $0/convert/colormaps nomarkers

# Graphics
mergedir  out $1/assets/graphics nomarkers
mergedir  out $0/convert/graphics nomarkers

# Sounds
mergedir  out $1/assets/sounds nomarkers
mergedir  out $0/convert/sounds nomarkers

# Music
mergedir  out $1/assets/music nomarkers

# Sprites
marker    out ss_start
mergedir  out $1/assets/sprites nomarkers
mergedir  out $0/convert/sprites nomarkers
marker    out ss_end

# Secondary Colormaps
marker    out c_start
mergedir  out $1/assets/colormaps-secondary nomarkers
mergedir  out $0/convert/colormaps-secondary nomarkers
marker    out c_end

finish out $0/$2
end
